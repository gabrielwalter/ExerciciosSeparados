{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Compilar com Make",
      "type": "shell",
      "command": "make",
      "group": {
        "kind": "build"
      },
      "problemMatcher": [
        "$gcc"
      ],
      "detail": "Compila todos os exerc\u00edcios usando Makefile"
    },
    {
      "label": "Executar exerc\u00edcio",
      "type": "shell",
      "command": "make run PROG=${input:exercicio}",
      "dependsOn": [
        "Compilar com Make"
      ],
      "detail": "Executa um exerc\u00edcio espec\u00edfico"
    },
    {
      "label": "Limpar bin\u00e1rios",
      "type": "shell",
      "command": "make clean",
      "detail": "Remove os bin\u00e1rios gerados"
    },
    {
      "label": "CMake: Configure",
      "type": "shell",
      "command": "cmake",
      "args": [
        "-B",
        "build",
        "-S",
        "."
      ],
      "group": "build",
      "dependsOn": ["CMake: Clean Build"],
      "detail": "Configura o projeto com CMake (depende de limpeza de build para evitar cache WSL/Windows)"
    },
    {
      "label": "CMake: Clean Build",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-NoProfile",
        "-Command",
        "if (Test-Path -Path build) { Remove-Item -Recurse -Force build }"
      ],
      "problemMatcher": [],
      "detail": "Remove a pasta build para evitar conflitos de cache entre WSL e Windows"
    },
    {
      "label": "CMake: Build",
      "type": "shell",
      "command": "cmake",
      "args": [
        "--build",
        "build"
      ],
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "dependsOn": [
        "CMake: Configure"
      ],
      "detail": "Compila o projeto com CMake"
    }
  ],
  "inputs": [
    {
      "id": "exercicio",
      "type": "promptString",
      "description": "Nome do exerc\u00edcio (ex: ex01, ex02, etc)",
      "default": "ex01"
    }
  ]
}